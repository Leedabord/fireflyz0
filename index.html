<!DOCTYPE html>

<html lang="en">

<head>
  <meta name="viewport" content="width=device-width">
  <title>Firefly | A Simple Javascript App Boilerplate</title>
  <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:300,400,500,700" rel="stylesheet">

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-10319722-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-10319722-13');
  </script>

  <!-- mailchimp -->
  <script type="text/javascript" src="//downloads.mailchimp.com/js/signup-forms/popup/embed.js" data-dojo-config="usePlainJson: true, isDebug: false"></script><script type="text/javascript">require(["mojo/signup-forms/Loader"], function(L) { L.start({"baseUrl":"mc.us17.list-manage.com","uuid":"2e74f46bf1b8e8d8c7defa9ce","lid":"ac63aeb72f"}) })</script>

  <style>

    * {
      box-sizing: border-box;
    }
    body {
      font-family: system-ui, sans-serif;
      line-height: 1.5;
      margin: 0 auto;
      max-width: 900px;
      color: #444555;
    }

    /* HERO */

    header {
      padding: 3rem;
    }

    @media (max-width:770px) {
      header {
        padding: 1rem;
      }
    }

    /* hero nav */

    .top-bar {
      display: flex;
      justify-content: space-between;
      margin: 0 0 3rem;
    }
    .top-bar a.logo {
      font-size: 1.1rem;
      margin: 0;
      font-weight: 500;
      font-family: 'Roboto Mono', monospace;
      color: #FF5555;
    }
    .top-bar a.logo:hover {
      text-decoration: none;
    }
    header nav {
      margin: 0;
      padding: 0;
    }
    header nav a {
      display: inline-block;
      margin-left: 1rem;
      font-weight: 500;
    }
    header nav :hover {
      text-decoration: none;
    }

    /* hero content */

    .hero-content {
      padding: 5rem 25% 0 0;
    }
    @media (max-width:770px) {
      .hero-content {
        padding-right: 0;
      }
    }
    .headline {
      font-family: 'Roboto Mono', monospace;
      font-size: 2rem;
      font-weight: 500;
      line-height: 1.3;
    }
    .sub-headline-big {
      font-size: 1.2rem;
      margin: 0 0 1rem;
      /* color: #777888; */
    }
    .sub-headline {
      font-size: 1rem;
      margin: 0 0 3rem;
      color: #777888;
    }
    .hero-content a.button {
      text-decoration: none;
      font-family: 'Roboto Mono', monospace;
      margin: 0 auto 1rem;
      color: white;
      display: inline-block;
      background: rgba(251,71,74,.9);
      padding: .66rem 1.33rem;
      border-radius: 4px;
      font-size: 1.2rem;
      font-weight: 500;
      transition: all .2s ease;
    }
    .hero-content a.button:hover {
      background: rgba(251,71,74,1);
    }

    /* MAIN */

    main {
      position: relative;
      padding: 3rem;
      display: flex;
    }

    aside {
      flex: 0 0 20%;
    }
    section {
      flex: 0 1 80%;
      padding-left: 3rem;
      margin-top: 1rem;
    }

    @media (max-width:770px) {
      main {
        flex-direction: column;
        padding: 1rem;
      }
      section {
        padding-left: 0;
      }
    }

    /* main sticky-nav */

    aside nav {
      margin: 0 0 6rem;
      position: absolute;
      position: -webkit-sticky;
      position: sticky;
      top: 2rem;
    }
    aside nav a {
      display: block;
      margin-bottom: .5rem;
    }
    aside nav a.primary {
      color: #444555;
      color: #8e5eed;
      color: #FF5555;
      margin-top: 1.5rem;
      font-weight: 500;
      font-size: 1.1rem;
      font-size: 1rem;
    }
    aside nav a.secondary {
      color: #777888;
      font-size: 0.9rem;
      font-weight: 500;
    }

    @media (max-width:770px) {
      aside nav a.primary {
        font-size: 1.2rem;
      }
      aside nav a.secondary {
        font-size: 1rem;
      }
    }

    /* main content */

    h1 {
      color: #FF5555;
      font-family: 'Roboto Mono', monospace;
      font-size: 1.6rem;
      font-weight: normal;
      margin: 5rem 0 1rem;
    }
    h2 {
      color: #444555;
      font-size: 1.4rem;
      font-weight: 600;
      margin: 2.5rem 0 .5rem;
    }
    h3 {
      color: #444555;
      font-size: 1rem;
      font-weight: 600;
      margin: 1.5rem 0 .5rem;
    }
    li {
      margin: 0 0 .5rem;
    }
    code {
      font-family: 'Roboto Mono', monospace;
      background: hsla(0, 0%, 0%, .05);
      font-size: 0.85em;
      padding: 1px 2px;
      border-radius: 2px;
    }
    pre {
      font-family: 'Roboto Mono', monospace;
      background: hsla(0, 0%, 0%, .05);
      font-size: 0.85em;
      padding: .5em;
      border-radius: 2px;
    }
    a {
      color: #8e5eed;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    .callout {
      padding: 0.01rem 1rem 1rem 1.5rem;
      margin: 0 0 1rem;
      color: #666777;
      border-left: 3px solid rgba(251,71,74,.8);
      background: hsl(236, 100%, 98%);
    }
    .callout h3 {
      color: #444555;
    }
    .callout code {
      background: white;
    }
    blockquote {
      color: #777888;
      border-left: 2px solid #dddeee;
      font-style: italic;
      margin: 1rem 0;
      padding-left: 1rem;
    }
    footer {
      margin: 8rem 0 0;
      text-align: center;
      color: #999aaa;
    }
    footer a {
      color: #999aaa;
      text-decoration: underline;
    }

  </style>
</head>

<body>

<header>
  <div class="top-bar">
    <a class="logo" href="#">Firefly</a>
    <nav>
      <a href="https://github.com/sampl/firefly">Source</a>
      <a href="https://demo.getfirefly.org">Demo</a>
    </nav>
  </div>

  <div class="hero-content">

    <p class="headline">
      <span id="type_target"></span>
      <span id="spacer_target" style="opacity: 0;"></span>
    </p>
    <p class="sub-headline-big">Firefly can teach you how&mdash;it's the friendly starter kit for designers and front-end devs who want to ship their own projects ðŸ”¥ðŸ’ªðŸš¢</p>
    <p class="sub-headline">Firefly is a learner-focused modern web-app Javascript boilerplate and development guide based on Create React App and Firebase</p>
    <a class="button" href="#getting-started">Start building</a>
    <p class="sub-headline">or <a href="https://github.com/sampl/firefly">view source on Github</a></p>
  </div>

  <script>
    var counter = 0
    var text = '*You* can learn to build real web apps, too.'
    var speed = 45
    var typeTarget = document.getElementById("type_target")
    var spacerTarget = document.getElementById("spacer_target")

    // add clear text to the spacer to adding type doesn't make the page jump
    spacerTarget.innerHTML = text

    function type() {
      if (counter < text.length) {
        spacerTarget.innerHTML = spacerTarget.innerHTML.slice(0, -1)
        typeTarget.innerHTML += text.charAt(counter)
        counter++
        setTimeout(type, speed)
      }
    }
    type()
  </script>

</header>


<main>

<aside>
  <nav>
    <a class="primary" href="#philosophy">Philosophy</a>

    <a class="primary" href="#how-it-works">How it works</a>
    <a class="secondary" href="#how-it-works-views">Views</a>
    <a class="secondary" href="#how-it-works-data">Data</a>
    <a class="secondary" href="#how-it-works-other">Other stuff</a>

    <a class="primary" href="#getting-started">Getting started</a>
    <a class="secondary" href="#getting-started-quick-start">Quick start</a>
    <a class="secondary" href="#getting-started-prerequisites">Before you begin</a>
    <a class="secondary" href="#getting-started-create">Creating your app</a>
    <a class="secondary" href="#getting-started-working">As you work</a>
    <a class="secondary" href="#getting-started-next-steps">Next steps</a>
  </nav>
</aside>

<section>

  <div style="font-size: 1.15rem">

    <strong>Making websites is <em>hard</em>.</strong></p>

    <p>Sure, writing HTML is pretty easy&mdash;but letting users log in, securely submit forms, and search your data is <em>way</em> harder. Most people who try just give up. I almost did.</p>

    <p>Luckily, I found some tools that make things simpler. After months of combing through documentation (and plenty of mistakes), I made an empty "starter project" to speed up my own work. That's Firefly.</p>
  </div>


  <h1 id="philosophy">Philosophy</h1>

  <p>Firefly does away with a lot of the stuff that teams of professional engineers use to build large, high-volume, scalable applications. Instead, it's designed to help people without backend experience learn and build simple sites quickly.</p>

  <p>It embraces modern javascript syntax, the NPM ecosystem, single-page front-end applications, serverless backends, schemaless databases, and 3rd-party APIs for hard things like authentication and search&mdash;all to keep the codebase small and easier to "reason about". Firebase has no server to monitor, no database instance to host, no REST API to build, no containers, no password salts, no migrations, and no real need to learn HTTP or SQL.</p>

  <p>That said, we never go bleeding edge: all <a href="https://github.com/sampl/firefly/blob/master/package.json">Firefly dependencies</a> are used by large tech companies in production, are hugely popular in the community, and will likely be supported for years to come.</p>


  <h1 id="how-it-works">How it works</h1>

  <p>Firefly isn't a framework or library&mdash;it's just a boilerplate that you can copy when starting a new project.</p>

  <p>When you first copy Firefly and start it up, you'll see an empty list of "posts" (imagine blog posts, or wiki pages). Users can read individual posts or search for posts. Once they log in, they can like posts or create and edit their own posts. You can play with a live Firefly demo at <a href="https://demo.getfirefly.org/">demo.getfirefly.org</a> to see how it works.</p>

  <p>To make the project your own, simply find-and-replace all the instaces of "Firefly" and "posts" to match your own project and data.</p>

  <p>Let's take a closer look at the different parts of Firefly:</p>

  <h2 id="how-it-works-views">Views</h2>

  <p>Most of Firefly is built with <a href="">React</a>. React can feel weird at first&mdash;it looks funny, and it doesn't use normal HTML and CSS. Stick with it though&mdash;using components will feel like a revelation soon. Get started by reading the excellent <a href="https://facebook.github.io/react/docs/hello-world.html">official React guide</a>.</p>

  <h3>Presentation views</h3>

  <p>The main UI of a firebase app is a bunch of simple React components in the /views folder. These are usually stateless, presentational components written in the simple functional React style. Think of them like templates in MVC--their job is basically just to show HTML.</p>

  <h3>Styles</h3>

  <p>Firefly uses styled-components to add style. These are React components written with CSS, and they live in the /styles folder. Think of them as a replacement for SASS or LESS files.</p>

  <h3>Routing</h3>

  <p>The router is the part of the app that shows different React components based on the browser URL. React has no built-in router, so we use the popular <a href="https://reacttraining.com/react-router/web/guides">React Router</a>. All our app's routes live in the Routes.js file.</p>


  <h2 id="how-it-works-data">Data</h2>

  <p>Instead of a datastore like Redux, in Firefly you directly query the using Firebase</p>

  <h3>The database</h3>
  <p>Firefly uses the NoSQL <a href="">Firebase Firestore database</a> for saving data. Firestore organizes your data into "collections" (kind of like SQL tables) which have "documents" (kind of like rows, or big blobs of JSON). You write to the Firebase database directly from the user's web browser (no server required). Before you go much further, you should read the <a href="https://firebase.google.com/docs/firestore/web/start">Firebase Firestore Database Guide</a>.</p>
  <p>Firestore queries use javascript Promises to make async requests and error handling very simple. If you're not familiar with promises, learn a bit about <a href="https://www.youtube.com/watch?v=f8IgdnYIwOU">how promises work</a>.</p>

  <h3>Data providers</h3>
  <p>So how do you get your data into your views? Firefly comes with a bunch of "provider" react components in the /data folder to do just that--their responsibility is to listen for data from the database and pass it down to the views using the <a href="https://reactjs.org/docs/render-props.html">render prop</a> pattern.</p>
  <p>Many other React apps use something like <a href="https://egghead.io/courses/getting-started-with-redux">Redux</a> to keep their UI up-to-date when data changes, but many developers agree that <a>Redux is overkill</a> for a lot of simple apps, so Firefly just uses render methods and Firebase subscriptions.</p>

  <h3>Securing your data</h3>
  <p>Because any browser can write data directly into your database, you need some Firebase security rules to keep hackers from deleting data or viewing private stuff. Firefly comes with a default set of rules for posts that you can use can copy. <a href="https://firebase.google.com/docs/database/security">This video</a> does a great job explaining how these rules work.</p>

  <!-- <h3>Relational data</h3>
  <p>Handling data that "relates" to other data is one of the trickier parts of web development. Because Firestore is a NoSQL database, you'll need to handle this differently than you would in Rails (for example).</p>

  <p>In Firefly, each collection can be directly manipulated by the clients. Which clients can update which collection is restricted by the security rules the developer writes.</p>

  <p>Each collection also has some attributes that are automatically calculated on the backend for security reasons. They are only updated by Firebase server cloud functions, which have unlimited privledges. These are designated with an underscore at the beginning of their name.</p>

  <p>For example: when you "like" a post in Firefly, the Firebase client adds a new "like" to <code>post_likes</code> in the database. Then, a Firebase function who's is watching that table finds the post you liked and increments that post's <code>_like_count</code> attribute. Now we can query and sort posts by the number of likes they have&mdash;but users can't edit a post's like count directly.</p>

  <p>Loop to query lots of results&mdash;fairly fast because Firebase batches db requests</p> -->

  <h3>Authentication</h3>
  <p>Firefly uses <a href="https://firebase.google.com/docs/auth/web/start">Firebase Authentication</a> for logging users in.</p>
  <!-- TODO - better docs here -->


  <h3>Actions</h3>

  <p>OK, so now you know how Firefly shows UI with data from the database. But how do you make the app change when the user clicks something?</p>

  <p>The answer in Firefly is "actions"&mdash;plain old javascript functions that live in the "actions" folder. When the user wants to add a post, for example, the "add post" view will call the "add post" action, which takes care of sending the new post to the database. When the database gets the new post, the data providers will automatically send it to the views so everything's always up-to-date.</p>


  <h2 id="how-it-works-other">Other stuff</h2>

  <p>Firefly uses <a href="">Create React App</a> to take care of transpiling, bundling, linting, and running tests. You don't have to write or manage any configuration for this to work, just run <code>npm start</code>.</p>

  <p>The deployment scripts use Firebase hosting to host your app when you're ready to go live. Firebase hosting comes with HTTPS for free, and it's the same price as Google Cloud Platform object storage (cheap), and works well with the other Firebase services like backend functions and your database.</p>


  <h1 id="getting-started">Getting Started</h1>

  <div class="callout">
    <h3 id="getting-started-quick-start">Quick start</h2>

    <ol>
      <li>
        Clone the repo and install the packages with
        <code>git clone https://github.com/sampl/firefly &amp;&amp; cd firefly &amp;&amp; npm install</code>
      </li>
      <li>
        Remove `.example` from the names of your environment files with
        <code>mv .firebaserc.example .firebaserc &amp;&amp; mv env.dev.example env.dev &amp;&amp; mv .env.stage.example .env.stage &amp;&amp; mv .env.live.example .env.live</code>
      </li>
      <li>Create firebase projects in the <a href="https://console.firebase.google.com/">Firebase console</a> and add keys to <code>.firebaserc</code> and the <code>.env</code> files</li>
      <li>Start development with <code>npm start</code> and deploy with <code>npm run live</code></li>
    </ol>
  </div>

  <h2 id="getting-started-prerequisites">Before you begin</h2>

  <p>You'll need <a href="https://en.wikipedia.org/wiki/Git">git</a> to use Firefly. If you don't already know how to use git, <a href="https://www.codecademy.com/learn/learn-git">you can learn on Codecademy</a>.</p>

  <p><a href="https://nodejs.org/en/download">Download and install Node JS</a> if you haven't already.</p>

  <p>Run <code>npm install -g firebase-tools</code> to install the <a href="https://firebase.google.com/docs/cli/">Firebase command line tools</a>. You only need to do this once per computer.</p>

  <h2 id="getting-started-create">Creating your app</h2>

  <h3>Get the code</h3>

  <p>Firefly is a boilerplate, so to start a new Firefly project, we just make a copy of Firefly.</p>

  <ol>
    <li>In your terminal, <code>cd</code> to the folder where you want your project to live</li>
    <li>Clone this repo by running <code>git clone https://github.com/sampl/firefly</code></li>
    <li>Move "into" the folder you just created with <code>cd firefly</code> (you can also safely rename the <code>firefly</code> folder to the name of your project)</li>
    <li>Run <code>npm install</code> to install all the javascript packages Firefly needs</li>
  </ol>

  <h3>Connect to the database</h3>

  <p>Firefly projects only have one codebase, but use three Firebase projects. Each project has its own URL and its own separate copy of the database. This lets you develop and stage your app without affecting the live version.</p>
  <ol>
    <li>Go to the <a href="https://console.firebase.google.com">Firebase console</a> and sign in with your Google account</li>
    <li>Create three new projects, and name them something like <code>MyProject Dev</code>, <code>MyProject Stage</code>, and <code>MyProject LIVE</code></li>
  </ol>

  <p>Now let's connect our databases to our app by adding their "keys" to our app's environment ("env") files. You should generally keep connection keys like this secret, so first we'll rename our environment files to keep them from getting committed into git (the new filenames are listed in <code>.gitignore</code>).</p>

  <ol>
    <li>First, rename <code>.firebaserc.example</code> to <code>.firebaserc</code> and replace the blank space next to "development" with the <code>projectId</code> from the Firebase website.</li>
    <li>Rename <code>.env.dev.example</code> to <code>.env.dev</code>, and do the same thing for the stage and live files. Replace the blank spaces in that file with the codes from the Firebase website too.</li>
    <li>Now back on the Firebase website, click "Add Firebase to your web app" for each new project</li>
    <li>You'll see a block of code with info like "project id" and "API key"&mdash;add these values to your firebaserc and your dev, stage and live env files.</li>
  </ol>


  <h3>Set up authentication</h3>

  <p>Before you can add any posts, you'll have to allow sign-in with Google. Firebase makes this very easy.</p>

  <ol>
    <li>Back in the <a href="https://console.firebase.google.com/">Firebase console</a>, click on "Authentication" in the sidebar on the left</li>
    <li>Click "Set up sign-in method"</li>
    <li>Click "Google", toggle the "Enable" switch, and hit "Save"</li>
  </ol>


  <h3>Set up Firebase Functions</h3>

  <p>Before your app can run any backend functions.</p>

  Firebase Cloud Functions only work if your project has a paid plan, so <a href="https://console.firebase.google.com">upgrade your Firebase project</a> to "Blaze". This should still be free to use (unless you get a lot of traffic).
  <p><a href="https://firebase.google.com/docs/admin/setup#add_firebase_to_your_app">Create a Service Account</a> to run maintenance scripts</p>


  <h3>Other services</h3>

  <p>Firefly comes with a search powered by <a href="https://www.algolia.com">Algolia</a>. To enable search, <a href="https://www.algolia.com">create an account</a>, <a href="https://firebase.google.com/docs/functions/config-env">configure your functions credentials</a>. See <a href="https://github.com/sampl/firefly/blob/master/functions/index.js">index.js</a> for full instructions.</p>

  <p>There's also a simple <a href="https://stripe.com/" target="_blank">Stripe</a> integration for creating subscriptions and charging users. If you're not asking users for money, you can get rid of the files with "subscription" in the name. If you are, add your Stripe keys to the <code>.env</code> files and your Firebase functions config.</p>

  <p>Firefly also comes with <a href="https://analytics.google.com/" target="_blank">Google Analytics</a> for tracking page views and <a href="https://docs.sentry.io/clients/javascript/" target="_blank">Sentry</a> for monitoring errors. To use them, just create an account and project on each site, then add your tracking codes to your <code>.env</code> files.</p>


  <h2 id="getting-started-working">As you work</h2>

  <h3>Develop</h3>

  <p>Start your app with <code>npm start</code>. You should see a basic web app in your browser! ðŸ˜Ž</p>

  <p>Try logging in, then make sure you can create, like, edit, and delete posts.</p>

  <p>Now go back to your text editor and try editing some files. When you save, the changes should automatically appear in the browser.</p>

  <p>Now is probably a good time to CTRL-F for all the instances of "Firefly" in the codebase and rename them to the name of your project. You should also probably do this for "post", too.</p>


  <h3>Deploy</h3>

  <p>Firefly is insecure by default. <strong>Before going live, <a href="https://firebase.google.com/docs/database/security">secure your app</a> by writing rules in <code>database.rules.json</code></strong></p>

  <p>You can deploy your project to your test stage URL by running <code>npm run stage</code>.</p>

  <p>When it's time to go live, run <code>npm run live</code>!</p>


  <h2 id="getting-started-next-steps">Next Steps</h2>

  <ul>
    <li>Since Firefly is just a Javascript app, adding javascript packages is as simple as running an <code>npm install foo</code> and adding <code>import Foo from 'foo'</code> in your code.</li>

    <li>This <a href="https://github.com/agarrharr/awesome-static-website-services">Awesome Static Website Services</a> has a lot of examples of things that you can integrate with a Firefly-style app.</li>

    <li>The <a href="https://github.com/facebookincubator/create-react-app/blob/master/packages/react-scripts/template/README.md">Create React App user guide</a> has a ton of great guides for adding things like CSS Preprocessors, unit testing, and more.</li>

    <li>Firebase has a large repo of <a href="https://github.com/firebase/functions-samples">Firebase functions samples</a> for common backend tasks like sending emails and taking payments.</li>
  </ul>

  <p>That's it!</p>

  <p>Remember that <strong>learning this stuff is always hard&mdash;for everyone</strong>. Take small bites and keep at it. Eventually you'll build something amazing.</p>

  <p style="font-size: 2rem;">ðŸŽ‰ ðŸŽ‰ ðŸŽ‰</p>

  <br/>
  <br/>
  <br/>

  <em>Did I miss something? Was something confusing? I'd love to hear from you; <a href="https://github.com/sampl/firefly/issues">submit an issue</a> or <a href="https://github.com/sampl/firefly/pulls">pull request</a>.</em>

  <footer>by <a href="http://sampl.us/">Sam Pierce Lolla</a> at <a href="http://directedworks.com/">Directed Works</a></footer>

</section>

</main>

</body>

</html>
