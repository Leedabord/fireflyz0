<!DOCTYPE html>

<html lang="en">

<head>
  <meta name="viewport" content="width=device-width">
  <title>Firefly | A Simple Javascript App Boilerplate</title>
  <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:300,400,500,700" rel="stylesheet">
  <style>

    * {
      box-sizing: border-box;
    }
    body {
      font-family: system-ui, sans-serif;
      line-height: 1.4;
      margin: 0 auto;
      max-width: 900px;
      color: #444555;
    }

    /* HERO */

    header {
      /*min-height: 90vh;*/
      margin: 15px;
      padding: 2rem;
    }

    @media (max-width:770px) {
      header {
        padding: 0rem;
        min-height: 20rem;
      }
    }

    /* hero nav */

    .top-bar {
      display: flex;
      justify-content: space-between;
      margin: 0 0 3rem;
    }
    .top-bar h1 {
      font-size: 1.1rem;
      margin: 0;
      font-weight: 500;
    }
    header nav {
      margin: 0;
      padding: 0;
    }
    header nav a {
      display: inline-block;
      margin-left: 1rem;
    }

    @media (max-width:770px) {
      header .top-bar {
        display: none;
      }
    }

    /* hero content */

    .illustration {
      margin: 0 -3rem;
    }
    @media (max-width:1000px) {
      .illustration {
        margin: 0;
      }
    }

    .cell {
      display: flex;
      justify-content: space-between;

      align-items: stretch;
      min-height: 30px;
      flex: 1;
    }
    @media (max-width:770px) {
      .cell {
        min-height: 20px;
      }
    }

    .hero-content {
      color: white;
      padding: 2.5rem;
      text-align: center;
      width: 100%;
    }
    @media (max-width:770px) {
      .hero-content {
        padding: 1rem;
      }
    }
    .headline {
      font-family: 'Roboto Mono', monospace;
      font-size: 2rem;
    }
    .sub-headline-big {
      font-size: 1.2rem;
      margin: 0 0 3rem;
    }
    .sub-headline {
      font-size: 1rem;
      margin: 0 0 2rem;
    }
    .hero-content a {
      color: white;
      text-decoration: underline;
    }
    .hero-content a.button {
      text-decoration: none;
      font-family: 'Roboto Mono', monospace;
      margin: 0rem auto;
      background: white;
      display: inline-block;
      color: rgb(251,71,74);
      padding: 1rem 1.5rem;
      border-radius: 4px;
      font-size: 1.2rem;
      font-weight: 500;
    }
    .hero-content a.button:hover {
      color: rgba(251,71,74,0.8);
    }

    /* MAIN */

    main {
      display: flex;
      padding: 2rem;
      position: relative;
    }

    aside {
      flex: 0 0 20%;
    }
    section {
      flex: 0 1 80%;
      padding-left: 3rem;
      margin-top: 1rem;
    }

    @media (max-width:770px) {
      main {
        flex-direction: column;
        padding: 1rem;
      }
      section {
        padding-left: 0;
      }
    }

    /* main sticky-nav */

    aside nav {
      margin: 0 0 6rem;
      position: absolute;
      position: -webkit-sticky;
      position: sticky;
      top: 2rem;
    }
    aside nav a {
      display: block;
      margin-bottom: .25rem;
    }
    aside nav a.primary {
      color: #FF5555;
      color: #8e5eed;
      color: #444555;
      margin-top: 1.75rem;
      font-weight: 500;
      font-size: 1.1rem;
      font-size: 1rem;
    }
    aside nav a.secondary {
      color: #777888;
      font-size: 0.9rem;
    }

    @media (max-width:770px) {
      aside nav a.primary {
        font-size: 1.2rem;
      }
      aside nav a.secondary {
        font-size: 1rem;
      }
    }

    /* main content */

    h1 {
      color: #FF5555;
      font-family: 'Roboto Mono', monospace;
      font-size: 1.6rem;
      font-weight: normal;
      margin: 5rem 0 1rem;
    }
    h2 {
      color: #444555;
      font-size: 1.4rem;
      font-weight: 600;
      margin: 2.5rem 0 .5rem;
    }
    h3 {
      color: #444555;
      font-size: 1rem;
      font-weight: 600;
      margin: 1.5rem 0 .5rem;
    }
    li {
      margin: 0 0 .5rem;
    }
    code {
      font-family: 'Roboto Mono', monospace;
      background: hsla(0, 0%, 0%, .05);
      font-size: 0.85em;
      padding: 1px 2px;
      border-radius: 2px;
    }
    pre {
      font-family: 'Roboto Mono', monospace;
      background: hsla(0, 0%, 0%, .05);
      font-size: 0.85em;
      padding: .5em;
      border-radius: 2px;
    }
    a {
      color: #8e5eed;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    .callout {
      padding: 0.01rem 1rem 1rem 1.5rem;
      margin: 0 0 1rem;
      color: #666777;
      border-left: 3px solid rgba(251,71,74,.8);
      background: hsl(236, 100%, 98%);
    }
    .callout h3 {
      color: #444555;
    }
    blockquote {
      color: #777888;
      border-left: 2px solid #dddeee;
      font-style: italic;
      margin: 1rem 0;
      padding-left: 1rem;
    }
    footer {
      margin: 8rem 0;
      text-align: center;
      color: #999aaa;
    }
    footer a {
      color: #999aaa;
      text-decoration: underline;
    }

  </style>
</head>

<body>

<header>
  <div class="top-bar">
    <h1>Firefly</h1>
    <nav>
      <a href="#philosophy">Philosophy</a>
      <a href="#how-it-works">How it works</a>
      <a href="#getting-started">Getting Started</a>
    </nav>
  </div>

  <div class="illustration">
    <div class="cell" style="flex-direction: column;">
      <div class="cell">

        <!-- NW -->
        <div class="cell">
          <div class="cell" style="background: white;"></div>
          <div class="cell" style="background: linear-gradient(90deg, rgb(240,208,91), rgb(240,208,91)); border-radius: 10px 0 0 0;"></div>
        </div>

        <!-- N -->
        <div class="cell" style="flex: 10; flex-direction: column;">
          <div class="cell" style="background: linear-gradient(90deg, rgb(240,208,91), rgb(253,212,42)); border-radius: 0 10px 0 0;"></div>
          <div class="cell" style="background: linear-gradient(90deg, rgb(240,208,91), rgb(253,212,42));">
            <div class="cell" style="background: linear-gradient(90deg, rgb(230,156,84), rgb(252,151,33)); border-radius: 10px 0 0 0;">
              <!-- <div>
                <div style="background: red; width: 10px; height: 10px; border-radius: 50%; margin: 20px 0 20px 12px; float: left;"></div>
                <div style="background: red; width: 10px; height: 10px; border-radius: 50%; margin: 20px 0 20px 12px; float: left;"></div>
                <div style="background: red; width: 10px; height: 10px; border-radius: 50%; margin: 20px 0 20px 12px; float: left;"></div>
              </div> -->
            </div>
          </div>
        </div>

        <!-- NE -->
        <div class="cell" style="flex-direction: column;">
          <div class="cell" style="background: white;"></div>
          <div class="cell" style="background: linear-gradient(90deg, rgb(249,71,76), rgb(251,70,72)); border-radius: 0 10px 0 0;"></div>
        </div>

      </div>
      <div class="cell">

        <!-- W -->
        <div class="cell">
          <div class="cell" style="background: linear-gradient(90deg, rgb(63,97,255), rgb(63,98,255)); border-radius: 10px 0 0 0;"></div>
          <div class="cell" style="background: linear-gradient(90deg, rgb(42,140,91), rgb(41,140,91));"></div>
        </div>

        <!-- C -->
        <div class="cell" style="flex: 10;">
          <div class="cell" style="background: rgb(41,140,91);">
            <div class="hero-content" style="background: linear-gradient(90deg, rgb(31,32,99), rgb(36,38,53)); border-radius: 0 0 0 10px;">
              <!-- <p class="headline">Making real websites is easier than you think</p> -->
              <p class="headline"><span style="text-decoration: underline;">You</span> can build real web apps, too</p>
              <p class="sub-headline-big">Let Firefly teach you how. It's the friendly project boilerplate for devs who just want to ship.</p>
              <!-- <p class="sub-headline">Building modern web apps with user login, forms, and search really is easier than you think. Let Firefly show you how.</p> -->
              <!-- <p class="sub-headline">If you've ever tried to learn Rails and given up, Firefly was made for you.</p> -->
              <a class="button" href="#start">Read the Guide</a>
              <p>
                or <a href="https://github.com/sampl/firefly">view source on Github</a></p>
              </p>
            </div>
          </div>
        </div>

        <!-- E -->
        <div class="cell">
          <div class="cell" style="background: rgb(251,71,74);">
            <div class="cell" style="background: linear-gradient(90deg, rgb(89,35,187), rgb(89,35,186)); border-radius: 0 10px 0 0;">
            </div>
          </div>
          <div class="cell" style="background: linear-gradient(90deg, rgb(251,71,74), rgb(251,70,72)); border-radius: 0 0 10px 0;"></div>
        </div>
      </div>
      <div class="cell">

        <!-- SW -->
        <div class="cell" style="flex-direction: column;">
          <div class="cell">
            <div class="cell" style="background: linear-gradient(90deg, rgb(63,97,255), rgb(63,98,255)); border-radius: 0 0 0 10px;"></div>
            <div class="cell" style="background: linear-gradient(90deg, rgb(42,140,91), rgb(41,140,91));"></div>
          </div>
          <div class="cell">
            <div class="cell" style="background: white;"></div>
            <div class="cell" style="background: linear-gradient(90deg, rgb(240,208,91), rgb(240,208,91)); border-radius: 0 0 0 10px;"></div>
          </div>
        </div>

        <!-- S -->
        <div class="cell" style="flex: 10; flex-direction: column;">
          <div class="cell" style="background: linear-gradient(90deg, rgb(41,140,91), rgb(28,156,42));"></div>
          <div class="cell" style="background: linear-gradient(90deg, rgb(240,208,91), rgb(253,212,42)); border-radius: 0 0 10px 0;"></div>
        </div>

        <!-- SE -->
        <div class="cell" style="flex-direction: column;">
          <div class="cell">
            <div class="cell" style="background: linear-gradient(90deg, rgb(56,101,255), rgb(55,101,255)); border-radius: 0 0 10px 0;"></div>
            <div class="cell" style="background: white;"></div>
          </div>
          <div class="cell">
            <div class="cell" style="background: white;"></div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <div>
    <!-- empty div to get flex layout on <header> working -->
  </div>
</header>


<main>

<aside>
  <nav>
    <a class="primary" href="#philosophy">Philosophy</a>

    <a class="primary" href="#how-it-works">How it works</a>
    <a class="secondary" href="#how-it-works-data">Data</a>
    <a class="secondary" href="#how-it-works-actions">Actions</a>
    <a class="secondary" href="#how-it-works-views">Views</a>
    <a class="secondary" href="#how-it-works-routing">Routing</a>
    <a class="secondary" href="#how-it-works-other">Other stuff</a>

    <a class="primary" href="#getting-started">Getting started</a>
    <a class="secondary" href="#getting-started-quick-start">Quick start</a>
    <a class="secondary" href="#getting-started-prerequisites">Before you begin</a>
    <a class="secondary" href="#getting-started-create">Creating your app</a>
    <a class="secondary" href="#getting-started-working">As you work</a>
    <a class="secondary" href="#getting-started-deploying">Deploying</a>
    <a class="secondary" href="#getting-started-next-steps">Next steps</a>
  </nav>
</aside>

<section>

  <!-- rewrite to be about ME -->

  <p id="start"><strong>Making websites is <em>still too hard</em>.</strong></p>

  <p>Building a static site is pretty easy&mdash;but letting users log in, submit forms, and search is an order of magnitude harder. Many people who try just give up.</p>

  <p>Luckily, some new tools are making it easier. Together, they make a pretty compelling package.</p>

  <p>That's what Firefly is&mdash;a couple modern web tools put together to help you build real web apps. Think of it as a tiny alternative to Rails for building MVPs.</p>

  <p>I built Firefly for myself to help me with my own projects. I hope you use it to make something of your own.</p>


  <h1 id="philosophy">Philosophy</h1>

  <p>
    Firefly's goal is NOT to be a production framework for experienced engineers and large companies&mdash;it's to help new JS devs ship products to real users as quickly as possible.
    I've tried to keep the codebase as small as possible, which means no configuration and use of 3rd-party APIs for hard things like auth and search.
  </p>

  <p>
    Firefly embraces modern javascript syntax, the incredible NPM ecosystem, React, Create React App, Firebase, single-page front-end applications, serverless backends, and schemaless data backends&mdash;because they all make codebases conceptually simpler and shipping apps faster for beginners (compared to frameworks like Rails and Djano).
  </p>

  <p>
    That said, nothing Firefly uses is bleeding edge: its <a href="https://github.com/sampl/firefly/blob/master/package.json">dependencies</a> are all usually by a large tech company, used in production by large projects, hugely popular in the community, and will likely be supported for years to come.
  </p>

  <h1 id="how-it-works">How it works</h1>

  <p>Firefly is just a web app boilerplate for React and Firebase.</p>

  <p>When you clone Firefly and start it up, you'll see an app with a list of "posts" (think blog posts or wiki pages). You can read individual posts or search for posts. Once you log in, you can like posts or create and edit your own posts. Check out the <a href="https://firefly-a64d8.firebaseapp.com/">Firefly demo</a> to see it in action.</p>

  <p>Most of Firefly is built with <a href="">React</a>. React can feel weird at first&mdash;it looks funny, and it doesn't use normal HTML and CSS. Stick with it though&mdash;using components will feel like a revelation soon. Get started by reading the excellent <a href="https://facebook.github.io/react/docs/hello-world.html">official React guide</a>.</p>


  <h2 id="how-it-works-data">Data</h2>

  <h3>The database</h3>
  <p>Firefly uses the NoSQL <a href="">Firebase Firestore database</a> for saving data. Firestore organizes your data into "collections" (kind of like SQL tables) which have "documents" (kind of like rows, or big blobs of JSON). You write to the Firebase database directly from the user's web browser (no server required). Before you go much further, you should read the <a href="https://firebase.google.com/docs/firestore/web/start">Firebase Firestore Database Guide</a>.</p>
  <p>Firestore queries use javascript Promises to make async requests and error handling very simple. If you're not familiar with promises, learn a bit about <a href="https://www.youtube.com/watch?v=f8IgdnYIwOU">how promises work</a>.</p>

  <h3>Data Provider Components</h3>
  <!-- TODO - better docs here -->

  <p>Many React apps use something like <a href="https://egghead.io/courses/getting-started-with-redux">Redux</a> to for state management (which sort of a fancy way of saying "keep my UI up-to-date when my data changes"). Many developers agree that <a>Redux is overkill</a> for a lot of simple apps, so Firefly just uses render methods and Firebase subscriptions to keep your data up-to-date everywhere.</p>

  <h3>Authentication</h3>
  <p>Firefly uses <a href="https://firebase.google.com/docs/auth/web/start">Firebase Authentication</a> for logging users in.</p>
  <!-- TODO - better docs here -->

  <h3>Securing your data</h3>
  <p>Because any browser can write data directly into your database, you need some security rules to keep bad guys from deleting data or viewing private stuff. Firefly comes with a default set of rules for posts that you can use can copy. <a href="https://firebase.google.com/docs/database/security">This video</a> does a great job explaining how these rules work.</p>


  <h3>Relational data</h3>
  <p>Handling data that "relates" to other data is one of the trickier parts of web development. Because Firestore is a NoSQL database, you'll need to handle this differently than you would in Rails, for example.</p>

  <p>In Firefly, each collection can be directly manipulated by the clients. Which clients can update which collection is restricted by the security rules the developer writes.</p>

  <p>Each collection also has some attributes that are automatically calculated on the backend for security reasons. They are only updated by Firebase server cloud functions, which have unlimited privledges. These are designated with an underscore at the beginning of their name.</p>

  <!-- TODO - use real code for this ex -->
  <p>For example: when you "like" a post in Firefly, the Firebase client adds a new "like" to <code>post_likes</code> in the database. Then, a Firebase function who's is watching that table finds the post you liked and increments that post's <code>_like_count</code> attribute. Now we can query and sort posts by the number of likes they have&mdash;but users can't edit a post's like count directly.</p>

  <!-- <p>Loop to query lots of results&mdash;fairly fast because Firebase batches db requests</p> -->


  <h2 id="how-it-works-actions">Actions</h2>

  <!-- TODO -->

  <h2 id="how-it-works-views">Views</h2>

  <p>Views in Firefly are built with <a href="">React</a>, which keeps a component's controller logic, templates, and sometimes styles all in a single file. If you're used to writing HTML, CSS, and JavaScript in different files, this will feel weird at first. Stick with it&mdash;writing your UI using all-on-one components will feel like a revelation soon. Get started by reading the excellent <a href="https://facebook.github.io/react/docs/hello-world.html">official React guide</a>.</p>


  <h2 id="how-it-works-routing">Routing</h2>

  <p>The router is the part of the app that shows different pages based on the URL. React has no router built-in, so we use the popular <a href="https://reacttraining.com/react-router/web/guides">React Router</a>.</p>


  <h2 id="how-it-works-other">Other stuff</h2>

  <p>Firefly uses <a href="">Create React App</a> to take care of transpiling, bundling, linting, and running tests. You don't have to write or manage any configuration for this to work, just run <code>npm start</code>.</p>

  <p>The deployment scripts use Firebase hosting to host your app when you're ready to go live. Firebase hosting comes with HTTPS for free, and it's the same price as Google Cloud Platform object storage (cheap), and works well with the other Firebase services like backend functions and your database.</p>


  <h1 id="getting-started">Getting Started</h1>

  <div class="callout">
    <h3 id="getting-started-quick-start">Quick start</h2>

    <ol>
      <li><code>git clone https://github.com/sampl/firefly &amp;&amp; cd firefly &amp;&amp; npm install</code></li>
      <li><code>mv .firebaserc.example .firebaserc &amp;&amp; mv env.development.example env.development &amp;&amp; mv .env.production.example .env.production</code></li>
      <li>add your Firebase keys to <code>.firebaserc</code> and the <code>.env</code> files</li>
      <li><code>npm start</code></li>
    </ol>
  </div>

  <h2 id="getting-started-prerequisites">Before you begin</h2>

  <p>This tutorial uses Git for version control. If you're not already a Git user, <a href="https://www.codecademy.com/learn/learn-git">you can learn about it here</a>.</p>

  <p><a href="https://nodejs.org/en/download">Download and install node</a> if you haven't already.</p>

  <p>Run <code>npm install -g firebase-tools</code> to install the <a href="https://firebase.google.com/docs/cli/">Firebase CLI</a>. You only need to do this once per computer.</p>

  <h2 id="getting-started-create">Creating your app</h2>

  <h3>Get the code</h3>

  <p>Firefly is just a boilerplate. To start a new Firefly project, we simply make a copy of Firefly.</p>

  <ol>
    <li>In your terminal, <code>cd</code> to the folder where you want your project to live.</li>
    <li>Clone this repo with <code>git clone https://github.com/sampl/firefly</code>.</li>
    <li>Go into the folder you just created with <code>cd firefly</code>. You can also rename the <code>firefly</code> folder to whatever you want.</li>
    <li>Run <code>npm install</code> to install all the packages Firefly needs.</li>
  </ol>

  <p>You've got your own Firefly app! Now let's tell it how to find the database.</p>

  <h3>Create the database</h3>

  <ol>
    <li>Go to the <a href="console.firebase.google.com">Firebase console</a> and sign in with your Google account</li>
    <li>Create a new project and name it something like <code>MyProjectName [DEVELOPMENT]</code></li>
    <li>Click "Add Firebase to your web app"</li>
    <li>You'll see a block of code&mdash;leave this window open, you'll need it in a minute</li>
  </ol>

  <h3>Connect to the database</h3>

  <p>Now let's connect our database to our app. The connection parameters are security secrets, so first we'll rename our environment files to keep them from getting committed into git (the new filenames are listed in <code>.gitignore</code>).</p>

  <ol>
    <li>First, rename <code>.firebaserc.example</code> to <code>.firebaserc</code> and replace the blank space next to "development" with the <code>projectId</code> from the Firebase website.</li>
    <li>Rename <code>.env.development.example</code> to <code>.env.development</code>. Replace the blank spaces in that file with the codes from the Firebase website too.</li>
  </ol>


  <h3>Set up authentication</h3>

  <p>Before you can add any posts, you'll have to allow sign-in with Google. Firebase makes this very easy.</p>

  <ol>
    <li>Back in the <a href="https://console.firebase.google.com/">Firebase console</a>, click on "Authentication" in the sidebar on the left</li>
    <li>Click "Set up sign-in method"</li>
    <li>Click "Google", toggle the "Enable" switch, and hit "Save"</li>
  </ol>


  <h3>Set up Firebase Functions</h3>

  <p><a href="https://firebase.google.com/docs/admin/setup#add_firebase_to_your_app">Create a Service Account</a> to run maintenance scripts with <code>node scripts/test.js</code></p>


  <h3>Set up search</h3>

  <p>Firefly comes with a search powered by <a href="https://www.algolia.com">Algolia</a>. To enable search, <a href="https://www.algolia.com">create an account</a>, <a href="https://firebase.google.com/docs/functions/config-env">configure your functions credentials</a>, and <a href="https://console.firebase.google.com">upgrade your Firebase plan</a> to a tier that has <a href="https://firebase.google.com/docs/functions">Firebase functions</a>. See <a href="https://github.com/sampl/firefly/blob/master/functions/index.js">index.js</a> for full instructions.</p>


  <h2 id="getting-started-working">As you work</h2>

  <p>Start your app with <code>npm start</code>. You should see a basic web app in your browser! 😎</p>

  <p>Try logging in, then make sure you can create, like, edit, and delete posts.</p>

  <p>Now go back to your text editor and try editing some files. When you save, the changes should automatically appear in the browser.</p>

  <p>After each change, commit your work using <a href="">git</a>.</p>


  <h2 id="getting-started-deploying">Deploying</h2>

  <p>Each project you make using Firefly actually uses <em>two</em> Firebase projects&mdash;one for development, and one for the live production site. We already made the development project, now we need to make one for production.</p>

  <ol>
    <li>Go back to <a href="#getting-started-firebase">Connecting to Firebase</a> and repeat the steps, but call this project something like <code>MyProjectName [LIVE]</code></li>
    <li>Fill in the "production" value in <code>.firebaserc</code></li>
    <li>Rename <code>.env.production.example</code> to <code>.env.production</code> and add the new Firebase connection parameters there too.</p>
    <li><strong>Firefly is insecure by default. Before going live, <a href="https://firebase.google.com/docs/database/security">secure your app</a> by writing rules in <code>database.rules.json</code></strong></li>
  </ol>


  <p>When it's time to go live, run <code>npm run live</code>!</p>

  <p style="font-size: 2rem;">🎉 🎉 🎉</p>


  <h2 id="getting-started-next-steps">Next Steps</h2>

  <p>One of Firefly's principles is "<a href="#principles-simple">Radically Simple</a>", which means you'll probably have to add some important features yourself before you're done.</p>

  <ul>

    <li>Since Firefly is just a Javascript app, adding new features is usually as simple as running an <code>npm install foo</code> and adding <code>import Foo from 'foo'</code> in the code.</li>

    <li>The <a href="https://github.com/facebookincubator/create-react-app/blob/master/packages/react-scripts/template/README.md">Create React App user guide</a> has a ton of great guides for adding things like CSS Preprocessors, unit testing, and more.</li>

    <li>Firebase has a large repo of <a href="https://github.com/firebase/functions-samples">Firebase functions samples</a> for common backend tasks like sending emails and taking payments.</li>

    <li>If you want build a mobile app, take a look at <a href="https://facebook.github.io/react-native/">React Native</a>, which lets you use your React skills to write native iOS and Android apps. <a href="https://github.com/react-community/create-react-native-app">Create React Native App</a> is a good way to get started.</li>

    <li>There are some great tools for keeping an eye on your app when it's live. We recommend <a href="https://docs.sentry.io/clients/javascript/">Sentry</a> for monitoring errors on the site, <a href="https://support.google.com/analytics/answer/1008080?hl=en">Google Analytics</a> for tracking traffic, and <a href="https://docs.intercom.com/install-on-your-product-or-site/quick-install/install-intercom-on-your-web-app-for-logged-in-users">Intercom</a> for in-app support.</li>

  </ul>

  <p>Did I miss something? Could something be more clear? <a href="https://github.com/sampl/firefly/issues">Submit issues and PRs</a></p>

  <footer>by <a href="http://sampl.us/">Sam Pierce Lolla</a></footer>

</section>

</main>

</body>

</html>
