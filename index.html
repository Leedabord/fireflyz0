<!DOCTYPE html>

<html lang="en">

<head>
  <meta name="viewport" content="width=device-width">
  <title>Firefly | A Simple Javascript App Boilerplate</title>
  <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:300,400,500,700" rel="stylesheet">
  <style>

    * {
      box-sizing: border-box;
    }
    body {
      font-family: system-ui, sans-serif;
      line-height: 1.4;
      margin: 0 0 10rem;
      color: #555666;
    }

    /* HERO */

    header {
      display: flex;
      flex-direction: column;
      align-items: stretch;
      justify-content: space-between;;
      min-height: 90vh;
      background: #333;
      background: linear-gradient(45deg, #FD7D68, #FDB952);
      margin: 15px;
      color: white;
      padding: 2rem;
    }

    @media (max-width:770px) {
      header {
        padding: 1rem;
        min-height: 20rem;
      }
    }

    /* hero nav */

    .top-bar {
      display: flex;
      justify-content: space-between;
      margin: 0 0 2rem;
    }
    .top-bar h1 {
      font-size: 1.1rem;
      margin: 0;
      color: white;
      font-weight: 500;
    }
    header nav {
      margin: 0;
      padding: 0;
    }
    header nav a {
      display: inline-block;
      color: white;
      margin-left: 1rem;
    }

    @media (max-width:770px) {
      header nav {
        display: none;
      }
    }

    /* hero content */

    .hero-content {
      margin: 2rem 0 0;
      text-align: center;
    }
    .headline {
      font-family: 'Roboto Mono', monospace;
      font-size: 1.4rem;
    }
    .sub-headline {
      font-size: 1rem;
      margin: 0 0 2rem;
    }
    .clone {
      font-family: 'Roboto Mono', monospace;
      margin: 0rem auto;
      background: white;
      display: inline-block;
      color: #8e5eed;
      padding: .5rem .75rem;
      border-radius: 2px;
    }
    .hero-content a {
      color: white;
      text-decoration: underline;
    }

    /* MAIN */

    main {
      display: flex;
      margin: 0 auto;
      padding: 2rem;
      max-width: 900px;
      position: relative;
    }

    aside {
      flex: 0 0 20%;
    }
    section {
      flex: 0 1 80%;
      padding-left: 2rem;
      margin-top: 1rem;
    }

    @media (max-width:770px) {
      main {
        flex-direction: column;
      }
      section {
        padding-left: 0;
      }
    }

    /* main sticky-nav */

    aside nav {
      margin: 0 0 2rem;
      position: absolute;
      position: -webkit-sticky;
      position: sticky;
      top: 2rem;
    }
    aside nav a {
      display: block;
      margin-bottom: .25rem;
    }
    aside nav a.primary {
      color: #FF5555;
      color: #8e5eed;
      color: #555666;
      margin-top: 1.75rem;
      font-weight: 500;
      font-size: 1.1rem;
      font-size: 1rem;
    }
    aside nav a.secondary {
      color: #777888;
      font-size: 0.9rem;
    }

    @media (max-width:770px) {
      aside nav a.primary {
        font-size: 1.2rem;
      }
      aside nav a.secondary {
        font-size: 1rem;
      }
    }

    /* main content */

    h1 {
      color: #FF5555;
      font-family: 'Roboto Mono', monospace;
      font-size: 1.6rem;
      font-weight: normal;
      margin: 5rem 0 1rem;
    }
    h2 {
      color: #555666;
      font-size: 1.4rem;
      font-weight: 600;
      margin: 2.5rem 0 .5rem;
    }
    h3 {
      color: #666777;
      font-size: 1rem;
      font-weight: 600;
      margin: 1.5rem 0 .5rem;
    }
    li {
      margin: 0 0 .5rem;
    }
    code {
      font-family: 'Roboto Mono', monospace;
      background: hsla(0, 0%, 0%, .05);
      font-size: 0.85em;
      padding: 1px 2px;
      border-radius: 2px;
    }
    a {
      color: #8e5eed;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    .callout {
      padding: 0 1rem 1rem 1rem;
      margin: 0 0 1rem;
      background: hsl(45, 100%, 93%);
      border: 1px solid transparent;
      border-radius: 4px;
    }

  </style>
</head>

<body>

<header>
  <div class="top-bar">
    <h1>Firefly</h1>
    <nav>
      <a href="#philosophy">Philosophy</a>
      <a href="#how-it-works">How it works</a>
      <a href="#getting-started">Getting Started</a>
      <a href="#next">Next steps</a>
    </nav>
  </div>
  <div class="hero-content">
    <p class="headline">Making real websites is easier than you think</p>
    <!-- <p class="sub-headline">Firefly is a minimal, modern single-page web app boilerplate with firebase, react, and webpack</p> -->
    <p class="sub-headline">If you've ever tried to learn Rails and given up, Firefly was made for you.</p>
    <div class="clone">git clone https://github.com/sampl/firefly</div>
    <p>
      or <a href="https://github.com/sampl/firefly">view on Github</a></p>
    </p>
  </div>
  <div>
    <!-- empty div to get flex layout on <header> working -->
  </div>
</header>

<main>

<aside>
  <nav>
    <a class="primary" href="#philosophy">Philosophy</a>
    <a class="secondary" href="#philosophy-modern">Cautiously Modern</a>
    <a class="secondary" href="#philosophy-simple">Radically Simple</a>
    <a class="secondary" href="#philosophy-learners">Built for Learners</a>

    <a class="primary" href="#how-it-works">How it works</a>
    <a class="secondary" href="#how-it-works-models">Models</a>
    <a class="secondary" href="#how-it-works-views">Views</a>
    <a class="secondary" href="#how-it-works-bundling">Bundling and Hosting</a>

    <a class="primary" href="#getting-started">Getting Started</a>
    <a class="secondary" href="#getting-started-quick-start">Quick start</a>
    <a class="secondary" href="#getting-started-prerequisites">Before you begin</a>
    <a class="secondary" href="#getting-started-create">Creating your app</a>
    <a class="secondary" href="#getting-started-working">As you work</a>
    <a class="secondary" href="#getting-started-deploying">Deploying</a>

    <a class="primary" href="#next">Next Steps</a>
    <a class="secondary" href="#next-tracking">Tracking</a>
    <a class="secondary" href="#next-other">Other</a>
  </nav>
</aside>

<section>

  <p><strong>Making websites is <em>still too hard</em>.</strong> Sure, writing some HTML, CSS, and jQuery is easy enough--but letting users log in, adding forms, and building search are an order of magnitude more difficult.</p>

  <!-- Suddenly you're lost in a world of schemas, migrations, joins, servers, and password salts. Most people just give up!-->

  <p>Luckily, some new tools are making it easier. When combined, they make a pretty compelling package.</p>

  <p>That's what Firefly is--a couple modern web tools put together to make web development easier. Think of it as a smaller, friendlier, more modern alternative to Ruby on Rails for getting your MVP off the ground. Firefly embraces modern concepts like the <a href="">single-page web application</a>, <a href="">serverless architecture</a>, and <a href="">component-based views</a>. Together, they make for a radically small codebase.

  <p>I think you'll Firefly makes creating basic apps surprisingly simple. Contributions are welcome!</p>


  <!-- <p>Ruby on Rails opened up web development to a whole generation of developers--even people who didn't think they WERE  developers before they found Rails. Without it, we wouldn't have many of the amazing services we have today. Properly framed, I think the modern JavaScript ecosystem can do the same.</p> -->

  <!-- <p>Firefly is intended to be an approachable starting place for writing "real" web apps. It's made especially for designers (and other people who are only used to writing a bit of client-side javascript but who don't have experience with servers and databases).</p> -->

  <h1 id="philosophy">Philosophy</h1>

  <blockquote>"Give me six hours to chop down a tree and I will spend the first four sharpening the axe."</blockquote>


  <h2 id="philosophy-modern">Cautiously Modern</h2>

  <p>Love it or hate it, the Javascript ecosystem is one of the most powerful. Firely wholeheartedly embraces JS--with a few caveats:</p>

  <p>Shouldn't go to the bleeding edge. All libraries and services we use are well-established, used in production by major companies and will be supported for years to come.</p>


  <p>This not only makes it easier to, but easier to swap out smaller pieces of your app as new packages become available.</p>

  <p>If you're used to working with jQuery, Rails, or Express, Firefly is going to feel very different. There are a few concepts that are important to understand before you dive in.</p>


  <ul>
    <li><strong>Heavy front-end</strong> - Firefly uses the front-end as much as possible. Simpler to manage and faster transitions.</li>
    <li><strong>Serverless backend</strong> - what Firefly can't do on the client or with a 3rd party service, it does using Firebase Functions. These are lightweight backend functions that run on the Google cloud servers, and require no uptime monitoring or special deployment. Firefly doesn't use a traditional backend server like you would with Express or Ruby on Rails. Instead, many of the normal things backend servers do are taken care of for you by the Real-time Database features, or are just done in the browser.</li>
    <li><strong>Heavy use of services</strong> - Firefly outsources a lot of its features to services specially built for a single purpose. For example, search in firefly is simply an Algolia integration. The Firefly database is built on the Firebase Real-time Database. This increases the chances of [vendor lock-in], but I believe the benefits of having no server or API code at all far outweigh that cost. Try authenticating a user with Firefly vs Passport and you might agree.</li>
    <li><strong>Modern Javascript</strong> - One think you might not be used to is the <em>kind</em> of Javascript that Firefly uses: <a href="">ES6</a>. ES6 is just the latest version of the language, and it comes with some new features that are going to be really helpful for you. Don't worry--we don't use all the crazy new stuff, and there are guides to help you as you go.</li>
  </ul>




  <h2 id="philosophy-simple">Radically Simple</h2>

  Do everything it takes to reduce simplicity.

  Not LOC, but things user has to have int heir head

  - Instead of scripts to generate code, just let users copy-paste when they want to create new things
  Use libs from NPM, so you don't have to think about the code
  <p>NPM, already home to thousands of amazing packages. NPM might be the worlds biggest collection of software hat does one thing well.</p>


  <p>When you start something new there's a lot to learn and firefly is no exception. But as you (and your codebase) mature, it's still important to have as a little cold as possible. Any code that you maintain, even if you didn't write it, is your responsibility to keep running and bug free. And as app complexity gross, keeping code bug free gets exponentially harder. That's why Firefly strives to keep total lines of code to a minimum.</p>

  <p>For example:</p>
  <ul>
    <li>Features like search, that not everybody needs, live in a separate repo.</li>
    <li>features like email and search don't live in a firefly app at all. (See services)</li>
    <li>wherever practical, code that you shouldn't edit is abstract the way behind an npm package</li>
  </ul>

  <ul>
    <li><strong>Boilerplate</strong> - Firefly isn't a library or framework--it's just a sample app that shows you how to plug the most important pieces together. What you add afterward is up to you. Unlike Rails, you don't have to update firefly "underneath" your app separately from your packages. It's just a boilerplate, so you can always take and use whatever party find useful.</li>
    <li><strong>Less code</strong> - You might have seen boilerplate projects in the past with a lot of code. Those projects can be useful if you already know how to write full apps and need to build something quickly for a hackathon, but they're daunting for new app developers and they contain a lot of things you'll never need.</li>
    <li><strong>No fluff</strong> - Firefly has no generators or CLI. Instead of generators and scaffolds, you simply create new models and views by copying and pasting existing boilerplate code. This means that installing firefly doesn't dump a bunch of files that you don't understand into your project. in fact firefly is only about 50 files, just json JavaScript HTML CSS and markdown.</li>
    <li><strong>Extendable</strong> - Making it easy to write more code for Firely means we don't have to include a lot of crap out-of-the-box. Firefly includes only the things we know you'll need for your app--and we <a href="#-next">show you how to add whatever else you might need later</a>.</li>
    <li><strong>One Language</strong> - You shouldn't have to learn two languages to make an app. That's why we've avoided template languages, backend languages, and SQL in favor of just Javascript (and things that work like Javascript like JSX).</li>
  </ul>



  <h2 id="philosophy-learners">Built for Learners</h2>

  A lot of the things in the previous two principles are probably sending experienced web-devs into a small rage right now.

  Relying on packages, pushing to the bleeding etc are bad practices for developers.

  Our goal is different. We're

  Do things that don't scale. Zero to one.

  Get people to having a nice webapp that works, and will continue to work **as quickly as possible**.

  Think circular dependencies.

  The goal is NOT to improve the speed of development for entrenched web-devs; it's to empower those who have skills OUTSIDE of engineering to develop their ideas into working products.

  <p>Some developers try to make their code bases seem smaller by writing really dense-looking code. This doesn't actually make their code easier to use because all the logical complexity is still there--and now it's harder to understand!

  <p>I've tried to include is a little code as possible in Firefly--but the code I did include was written to be easy to understand.</p>

  <p>Thousands of people are introduced to Javascript and programming each day. That's why Firefly should not just be a great tool, but also a great teacher. I've also added a ton of comments so that you can go through the code base and learn as you work (you can strip these out for your own projects, of course). This document also has lots of links to tutorials and videos that I found helpful while learning React, Firebase, and ES6.</p>

  <p>Javascript reduces context switching cost.</p>

  <p>For many apps, you won't ever have to:</p>

  <ul>
    <li>save, encrypt, or salt passwords</li>
    <li>manage sessions, login, or password reset</li>
    <li>monitor server uptime</li>
    <li>write a server api</li>
    <li>deploy</li>
    <li>write sql or joins</li>
  </ul>



  <ul>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
  </ul>




  <h1 id="how-it-works">How it works</h1>

  <p>Firefly is a single-page front-end web app boilerplate. Models have clear separation from Firefly views (Kind of like MVC, without the "C").</p>

  <p>As you read, follow along with the <a href="">code on github</a>.</p>


  <h2 id="how-it-works-models">Models</h2>

  <p>Firefly uses the Firebase Real-time Database for persisting data. Developers can write data directly from the client app, without a server as the middle-man. Before you go much further, you should read the <a href="https://firebase.google.com/docs/database/web/start">Firebase Real-time Database guide</a>.</p>

  <h3>Firefly Models</h3>

  </p>In Google Firebase, your data is just a big json blob--there's no schema and no tables. The convention in Firefly, however, is to use the top level of the json blob as a collection or table, the second level for Firebase-generated unique keys in that collection, and the third level for the attributes of each item (like a row).</p>

  <p>Firefly models live in the models folder and can be imported by both the client and server. You can write a firefly model however you like, but the default models extend a Supermodel class that has a lot of helper functions for adding, querying, and deleting collection items.</p>

  <p>Most models simply modify and return the Firebase promise on the fireplace clearly library. This makes error handling in the views very simple, however it does require a bit of knowledge about how promises work.</p>

  <!-- MPG on promises and error handling https://www.youtube.com/watch?v=f8IgdnYIwOU -->

  <p>The post model and views or just as an example copy it to create more collections and views or rename it to reflect the main collection in your app.</p>


  <h3>The User Model</h3>

  <p>The user model is special--it has custom methods for signing in and out with Firebase auth.</p>

  <p>We use <a href="https://firebase.google.com/docs/auth/web/start">Firebase Authentication</a> for logging users in, etc.</p>


  <h3>Relational Data</h3>

  <p>Handling data that "relates" to other data is one of the most difficult things. For example, how can you mark a post as "liked" and see all the posts a user liked without duplicating data in two places?</p>

  <p>Firebase handles this much differently than most apps. Each collection can be directly manipulated by the clients I need to collection has it in attributes that are only updated by firebase server cloud functions. Clients have no direct access to write to the post to like count attribute.</p>

  <p>For example: when you like a post in Firefly, Firebase adds a new <code>post_like</code> to the <code>post_likes</code> collection. Then, a Firebase function increments that post's <code>_like_count</code> so the client can query and sort posts by the number of likes.</p>

  <p><a href="https://firebase.google.com/docs/admin/setup#add_firebase_to_your_app">Create a Service Account</a> to run maintenance scripts with <code>node scripts/test.js</code></p>

  <p>Loop to query lots of results--fairly fast because Firebase batches db requests</p>

  <h3>Securing your data</h3>

  <p>Because clients can write data directly into your database, you need to write some security rules to keep bad guys from deleting data or viewing private data.


  <h2 id="how-it-works-views">Views</h2>

  <p>Views in Firefly are built with <a href="">React</a>. If you're used to writing HTML, CSS, and JavaScript in different files, React will feel a little weird at first. Stick with it--writing your UI using all-on-one components (like iOS and Android apps do) will feel like a revelation soon. Start by reading the <a href="https://facebook.github.io/react/docs/hello-world.html">official React guide</a>.</p>


  <h3>Routing</h3>

  <p>The router is the part of the app that shows different pages based on the URL. We use the popular <a href="https://reacttraining.com/react-router/web/guides">React Router</a>.</p>


  <h3>Listening for updates</h3>

  <p>Many React apps use something like <a href="https://egghead.io/courses/getting-started-with-redux">Redux</a> to for state management (which sort of a fancy way of saying "keep my views up-to-date when my data changes"). Many developers agree that <a>Redux is overkill</a> for a lot of simple apps.</p>

  <p>Instead, Firefly uses the much-simpler <a href="https://github.com/primus/eventemitter3">eventemitter3</a> library to let models announce when they've changed, and let views listen for those changes so they know to re-render.</p>


  <h2 id="how-it-works-bundling">Bundling and Hosting</h2>

  <p>NPM, the javascript package manager, to import 3rd party packages (and run scripts to start the development server and deploy). Here's a <a href="https://nodesource.com/blog/an-absolute-beginners-guide-to-using-npm/">tutorial</a> to get you started.</p>

  <p>Firefly uses create-react-app to . You don't have to do any configuration, just run <code>npm start</code> in your terminal</p>

  <p>Modern Javascript requires transpiling code to ensure it works on all browsers. Under-the-hood, Create React App uses Webpack to bundle all your files into a single <code>app.js</code>. It starts at client/app.js, finds all the files it imports (and he ones they import, etc) and bundles it up into a single app.js for the server.</p>

  <p>Create React App also includes ESLint to keep you from making small mistakes, the Babel transpiler to make sure the JS you write works on all browsers, and Jest to run automated tests on your code.</p>

  <p>Firebase hosting to host your data.</p>


  <h1 id="getting-started">Getting Started</h1>

  <div class="callout">
    <h3 id="getting-started-quick-start">Quick start</h2>

    <ol>
      <li><code>git clone https://github.com/sampl/firefly &amp;&amp; cd firefly &amp;&amp; npm install</code></li>
      <li><code>mv .firebaserc.example .firebaserc &amp;&amp; mv env.development.example env.development &amp;&amp; mv .env.production.example .env.production</code></li>
      <li>add your Firebase keys to <code>.firebaserc</code> and the <code>.env</code> files</li>
      <li><code>npm start</code></li>
    </ol>
  </div>

  <h2 id="getting-started-prerequisites">Before you begin</h2>

  <p>This tutorial uses Git for version control. If you're not already a Git user, <a href="https://www.codecademy.com/learn/learn-git">you can learn about it here</a>.</p>

  <p><a href="https://nodejs.org/en/download">Download and install node</a> if you haven't already.</p>

  <p>Run <code>npm install -g firebase-tools</code> to install the <a href="https://firebase.google.com/docs/cli/">Firebase CLI</a>. You only need to do this once per computer.</p>

  <h2 id="getting-started-create">Creating your app</h2>

  <h3>Get the code</h3>

  <p>Firefly is just a boilerplate. To start a new Firefly project, we simply make a copy of Firefly.</p>

  <ol>
    <li>In your terminal, <code>cd</code> to the folder where you want your project to live.</li>
    <li>Clone this repo with <code>git clone https://github.com/sampl/firefly</code>.</li>
    <li>Go into the folder you just created with <code>cd firefly</code>. You can also rename the <code>firefly</code> folder to whatever you want.</li>
    <li>Run <code>npm install</code> to install all the packages Firefly needs.</li>
  </ol>

  <p>You've got your own Firefly app! Now let's tell it how to find the database.</p>

  <h3>Create the database</h3>

  <ol>
    <li>Go to the <a href="console.firebase.google.com">Firebase console</a> and sign in with your Google account</li>
    <li>Create a new project and name it something like <code>MyProjectName (Stage)</code></li>
    <li>Click "Add Firebase to your web app"</li>
    <li>You'll see a block of code--leave this window open, you'll need it in a minute</li>
  </ol>

  <h3>Connect to the database</h3>

  <p>Now let's connect our database to our app. The connection parameters are security secrets, so first we'll rename our environment files to keep them from getting committed into git (the new filenames are listed in <code>.gitignore</code>).</p>

  <ol>
    <li>First, rename <code>.firebaserc.example</code> to <code>.firebaserc</code> and replace the blank space next to "dev" with the <code>projectId</code> from the Firebase website.</li>
    <li>Rename <code>.env.development.example</code> to <code>.env.development</code>. Replace the blank spaces in that file with the codes from the Firebase website too.</li>
  </ol>

  <h3>Set up authentication</h3>

  <p>Before you can add any posts, you'll have to allow sign-in with Google. Firebase makes this very easy.</p>

  <ol>
    <li>Back in the <a href="https://console.firebase.google.com/">Firebase console</a>, click on "Authentication" in the sidebar on the left</li>
    <li>Click "Set up sign-in method"</li>
    <li>Click "Google", toggle the "Enable" switch, and hit "Save"</li>
  </ol>

  <h2 id="using-working">As you work</h2>

  <p>Start your app with <code>npm start</code>. You should see a basic web app in your browser! 😎</p>

  <p>Try logging in, then make sure you can create, like, edit, and delete posts.</p>

  <p>Now go back to your text editor and try editing some files. When you save, the changes should automatically appear in the browser.</p>

  <p>After each change, commit your work using <a href="">git</a>.</p>

  <p>When you're ready to deploy your app to stage, run <code>npm run stage</code>.</p>


  <h2 id="using-deploying">Deploying</h2>

  <p>Each project you make using Firefly actually uses <em>two</em> Firebase projects--one for development and staging, and one for the live production site. We already made the development project, now we need to make one for production.</p>

  <ol>
    <li>Go back to <a href="#getting-started-firebase">Connecting to Firebase</a> and repeat the steps, but call this project something like <code>MyProjectName - LIVE</code></li>
    <li>Fill in the "production" value in <code>.firebaserc</code></li>
    <li>Rename <code>.env.production.example</code> to <code>.env.production</code> and add the new Firebase connection parameters there too.</p>
    <li><strong>Firefly is insecure by default. Before going live, <a href="https://firebase.google.com/docs/database/security">secure your app</a> by writing rules in <code>database.rules.json</code></strong></li>
  </ol>


  <p>When it's time to go live, run <code>npm run live</code>!</p>

  <p style="font-size: 2rem;">🎉 🎉 🎉</p>



  <h1 id="next">Next Steps</h1>

  <p>One of Firefly's principles is "as little code as possible", so you'll probably want to add some features to suit your app's needs.</p>


  <h2 id="next-tracking">Tracking</h2>

  <ul>
    <li><a href="https://docs.sentry.io/clients/javascript/">Sentry</a> for monitoring errors on the site</li>
    <li><a href="https://support.google.com/analytics/answer/1008080?hl=en">Google Analytics</a> for tracking traffic</li>
    <li><a href="https://docs.intercom.com/install-on-your-product-or-site/quick-install/install-intercom-on-your-web-app-for-logged-in-users">Intercom</a> to add a help chat</li>
  </ul>

  <h2 id="next-other">Other</h2>

  <p>The <a href="https://github.com/facebookincubator/create-react-app/blob/master/packages/react-scripts/template/README.md">Create React App user guide</a> has a ton of great guides for adding things like CSS Preprocessors, unit testing, and more.</p>

  <ul>
    <li>To enable search, sign up for <a href="https://www.algolia.com">Algolia</a>, <a href="https://firebase.google.com/docs/functions/config-env">configure your functions credentials</a>, and <a href="https://console.firebase.google.com">upgrade your Firebase plan</a> to a tier that has <a href="https://firebase.google.com/docs/functions">Firebase functions</a>. See the server code at <code>/functions/index.js</code> for more details.</li>
    <li>Add <a href="https://hackernoon.com/animated-page-transitions-with-react-router-4-reacttransitiongroup-and-animated-1ca17bd97a1a">page transitions</a></li>
    <li>Use <a href="https://github.com/gajus/react-css-modules">CSS Modules</a> to import and modularize CSS.</li>
    <li><a href="https://firebase.google.com/docs/hosting/custom-domain">Use a custom domain</a> like <code>www.myapp.com</code>.</li>
  </ul>

  <p>Did I miss something? Could something be more clear? <a href="https://github.com/sampl/firefly/issues">Submit issues and PRs</a></p>

</section>

</main>

</body>

</html>
